"use strict";var W=Object.create;var T=Object.defineProperty;var J=Object.getOwnPropertyDescriptor;var V=Object.getOwnPropertyNames;var L=Object.getPrototypeOf,U=Object.prototype.hasOwnProperty;var z=(e,r,t,o)=>{if(r&&typeof r=="object"||typeof r=="function")for(let n of V(r))!U.call(e,n)&&n!==t&&T(e,n,{get:()=>r[n],enumerable:!(o=J(r,n))||o.enumerable});return e};var f=(e,r,t)=>(t=e!=null?W(L(e)):{},z(r||!e||!e.__esModule?T(t,"default",{value:e,enumerable:!0}):t,e));var u=f(require("fs"),1),s=f(require("path"),1),G=require("process");var d=f(require("fs"),1),y=f(require("path"),1);var j=e=>{let r=/\/\*\*(?:(.|\r|\n)*?@doc[A-Z](?:.|\r|\n)*?)\*\//gm,t="",o;for(;o=r.exec(e);)t?t=t.concat(`\r
`,o[0]):t=o[0];return t};var O=e=>e.split(/\r?\n/).reduce((t,o)=>(o.includes("@doc")?t.push(o):o.includes("/**")||o.includes("*/")||(t[t.length-1]+=` ${o.replace("*","").trim()}`),t),[]);var $=f(require("prettier"),1),w=f(require("fs"),1),Q={jsxBracketSameLine:!1,semi:!0,tabWidth:2,singleQuote:!0,printWidth:120,useTabs:!1,bracketSpacing:!0},x=(e,r)=>{let t=$.default.format(r,{...Q,filepath:e});w.default.writeFileSync(e,t,"utf8")};var Z=/(\{([^\}]+)\})*/.source,q=/(\(([^\)]*)\))*/.source,H=/([^\s]+)/.source,K=/\[([^\s\]=]*)(=([^\]]+))?\]/.source,X=/(?:-\s+([^\*\r\n]*))?/.source,Y=/\s+/.source,S=/\s*/.source,_=/@doc(\w+)/.source,ee=new RegExp(`${_}${Y}${Z}${S}${q}${S}(${K}|${H})${S}${X}`);function te(e){let[,r,,t,,o,,n,,i,l,c]=e,a=o==null?void 0:o.split(",").map(D=>{let[g,P]=D.split("=");return{name:g,type:P}});return{tag:r,type:t,params:a,name:n||l,defaultValue:i,description:c}}var C=e=>{let r=e.match(ee);return te(r)},re=/@doc(\w+)\s+([\w- ]+)/;function oe(e){let[,r,t]=e;return{[r.toLowerCase()]:t}}var v=e=>{let r=e.match(re);return oe(r)};function ne(e){let r=O(e),t={};return r.forEach(o=>{if(o.includes("@docFile")||o.includes("@docDescription")){let n=v(o);t={...t,...n}}else{let n=C(o);if(n.tag){let i=n.tag.toLowerCase();delete n.tag,t[i]?t[i].push(n):t[i]=[n]}}}),t}var E=(e,r)=>{try{let t=d.default.readFileSync(e,"utf-8"),o=j(t);if(!o)return;let n=ne(o),i=y.default.basename(e,y.default.extname(e)),l={name:i,...n},c=`import type {FileDetails} from "@/types/lib";
 const fileDetails: FileDetails = ${JSON.stringify(l)}; 
 export default fileDetails;`,a=r;return d.default.existsSync(y.default.dirname(a))||d.default.mkdirSync(y.default.dirname(a),{recursive:!0}),d.default.writeFileSync(a,c),x(a,c),console.log(`Generated file for ${i}.`),n.file||""}catch(t){console.error(t)}};var b=(0,G.cwd)(),ie=(e,r)=>{let t=e.replace(r,"");return s.default.parse(t).dir.split("/").reduce((n,i)=>n+=i||"","")},se=e=>({name:s.default.basename(e),type:"folder",children:[]}),ce=(e,r,t)=>({name:s.default.basename(e,s.default.extname(e)),type:"file",fileType:t,extension:s.default.extname(e),prefix:ie(e,r)}),N=(e,r,t,o)=>{let n=se(e);try{u.default.readdirSync(e).forEach(l=>{let c=s.default.join(e,l),a=u.default.statSync(c);if(a.isDirectory())N(c,n,t,o);else if(a.isFile()){let p=ce(c,t),D=s.default.join(b,o.outputDir,"src","generated",`${p.prefix}${p.name}.ts`),g=E(c,D);typeof g=="string"&&(g?p.fileType=g:p.fileType=p.extension===".vue"?"Component":"Module",n.children.push(p))}}),Array.isArray(r)?r.push(n):r.children.push(n)}catch(i){console.error("Unable to read directory: "+i);return}},ae=(e,r)=>{let t=[];R(e,t);let o={...e,children:A(e)},n=s.default.join(b,r,"src","generated","index.ts"),i=`const files = ${JSON.stringify(o)}; 
 export default files; 
 export const searchItems = ${JSON.stringify(t)};`;u.default.existsSync(s.default.dirname(n))||u.default.mkdirSync(s.default.dirname(n),{recursive:!0});try{u.default.writeFileSync(n,i),x(n,i)}catch(l){console.error(l)}};function R(e,r){return e.children.forEach(t=>{t.type==="folder"?R(t,r):r.push({name:t.name,view:"FileView",prefix:t.prefix})})}function A(e){return e.children.reduce((r,t)=>(t.type==="folder"?t.children.length>0&&(r.push(t),t.children=A(t)):r.push(t),r),[])}var M=e=>{let r=s.default.join(b,e.sourceDir),t=[];N(r,t,r,e),t.length&&ae(t[0],e.outputDir)};var k=require("cosmiconfig"),fe=(0,k.cosmiconfig)("docs"),le={sourceDir:"template/src/components",outputDir:"docs"},pe=async()=>{let e=await fe.search("docs.config");return e&&e.config?e.config:{...le}},h=pe;var I=f(require("path"),1);var m=f(require("fs"),1),B=f(require("path"),1);function F(e){m.default.existsSync(e)&&m.default.readdirSync(e).forEach(r=>{let t=B.default.join(e,r);m.default.lstatSync(t).isDirectory()?(F(t),m.default.rmdirSync(t)):m.default.unlinkSync(t)})}(async()=>{let e=await h();try{let r=I.default.join(e.outputDir,"src","generated");F(r),console.log(`Generated data deleted from ${r}`)}catch(r){console.error(`Unable to delete generated data: ${r}`)}})();(async()=>{let e=await h();M(e)})();
